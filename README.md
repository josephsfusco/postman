# Overview
The purpose of this project is to create a simple HTTP Server which which has two services
* Authentication Service

* Business Service 

The two servcies are "seperate" and work in unison to authenticate a User using basic auth, provide a Bearer Token and subsequently request data using the current and valid token. 

Basic auth is maintained by a simple in memory database with usernames (emails) and passwords encrypted using a simple hash. 

Tokens are generated by and stored on the Auth Server in memory upon successfully providing basic credentials. To maintain security tokens are only valid for thirty (30) seconds. 

When Client requests data, Business Service makes a follow-up request to Auth Service, this ensures a seperation of services. Business Service has no knowledge of what keys are valid or not.


## Getting Started
This project is deployed on Heroku at the following domain {domain}
to begin make a [GET] request to the following endpoint 
`/basicAuthentication` 

`username: jsf.fusco@gmail.com`

`password: 1234`

## Endpoints
### Public

  ``` 
  /basicAuthentication
     Request body: { 'username' : <username>,
                     'password' : <password>
     }
  
     Response: {'token' : <bearer token>}
  ```
  
  ```
  /data
      headers: {'token' : <bearer token>}
      
      Response: {'data' : <data>}
  ```

### Internal
```
/TokenAuthentication
    Request body: {'token' : <bearer token>}

    Response: {'authenticated' : <Bool>}
```

## Flow
1) Client initiates by making call to Auth Server authenticating using the provided given username and password.
2) If basic creds are valid Auth Server generates a Bearer Token and responds with it to Client.
3) Client makes a subsequent call to Business Server including the Bearer Token in the request headers.
4) Business Server makes an internal call to Auth Server to verify the Token.
5) Auth Server returns the Authenticity of the Token
6) If valid Business Server responds with Data

![](/images/FlowChart.png)

## Testing
### Unit Testing
Basic unit test coverage provdied. Would ensure 100% testing for production

### System Testing
State diagram provided for testing 

- [x] All paths tested and succeded 
  
![](/images/StateDiagram.png)

# TODO

[ ] fix cleanup job 

[ ] optomise hashing (?)

[X] return 401

[ ] check status codes on auth response 